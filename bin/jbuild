(jbuild_version 1)

(executable
 ((name main)
  (libraries (atdgen lwt.unix))
  (preprocess (pps (lwt_ppx)))))

(rule
  ((targets (hello_t.ml hello_t.mli))
  (deps (hello.atd))
  (action (chdir ${ROOT} (run atdgen -t ${<})))))

(rule
  ((targets (hello_j.ml hello_j.mli))
  (deps (hello.atd))
  (action (chdir ${ROOT} (run atdgen -j ${<})))))

(rule
  ((targets (hello_b.ml hello_b.mli))
  (deps (hello.atd))
  (action (chdir ${ROOT} (run atdgen -b ${<})))))