<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sanddb (sanddb.Sanddb)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">sanddb</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Sanddb</span></h1></header><div class="spec module" id="module-Database"><a href="#module-Database" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Database/index.html">Database</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p><code class="code">Sanddb.Database</code> contains the type of the database and it's internal implementation.</p></div></div><div class="spec module" id="module-Record_id"><a href="#module-Record_id" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Record_id/index.html">Record_id</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p><code class="code">Sanddb.Record_id</code> is the basic record id type, which idetifies a record in the database.
It's compatible with base's Set type.</p></div></div><div class="spec module" id="module-Serializer"><a href="#module-Serializer" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Serializer/index.html">Serializer</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p><code class="code">Sanddb.Serializer</code> contains the different kind of serializers that are possible with SandDB.</p></div></div><div class="spec val" id="val-create_json_database"><a href="#val-create_json_database" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>create_json_database : Lwt_io.file_name <span class="keyword">&#8209;&gt;</span> (<span class="keyword">module </span><a href="Serializer/module-type-Json_serializer/index.html">Serializer.Json_serializer</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="Serializer/module-type-Json_serializer/index.html#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> (<span class="keyword">module </span><a href="Database/module-type-T/index.html">Database.T</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="Database/module-type-T/index.html#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'a</span>)</code></div><div class="doc"><p><code class="code">Sanddb.create_json_database file_name json_serializer</code> will create a json database based on the provided:
</p><ul><li><code class="code">file_name</code> which will be tha base of the database</li><li><code class="code">json_serializer</code> which will be responsible for the serialization between the database and the client
This function will return a first class database module, which can be used to communicate with the database.</li></ul></div></div><div class="spec val" id="val-create_biniou_database"><a href="#val-create_biniou_database" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>create_biniou_database : Lwt_io.file_name <span class="keyword">&#8209;&gt;</span> (<span class="keyword">module </span><a href="Serializer/module-type-Biniou_serializer/index.html">Serializer.Biniou_serializer</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="Serializer/module-type-Biniou_serializer/index.html#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> (<span class="keyword">module </span><a href="Database/module-type-T/index.html">Database.T</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="Database/module-type-T/index.html#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'a</span>)</code></div><div class="doc"><p><code class="code">Sanddb.create_biniou_database file_name biniou_serializer</code> will create a biniou database based on the provided:
</p><ul><li><code class="code">file_name</code> which will be tha base of the database</li><li><code class="code">biniou_serializer</code> which will be responsible for the serialization between the database and the client
This function will return a first class database module, which can be used to communicate with the database.</li></ul></div></div><div class="spec val" id="val-read_all_records"><a href="#val-read_all_records" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>read_all_records : (<span class="keyword">module </span><a href="Database/module-type-T/index.html">Database.T</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="Database/module-type-T/index.html#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> (<a href="Record_id/index.html#type-t">Record_id.t</a><span class="keyword"> * </span><span class="type-var">'a</span>, exn) Pervasives.result list Lwt.t</code></div><div class="doc"><p><code class="code">Sanddb.read_all_records database unit</code> gives back every database record, both visible and shadowed ones. The result can contain duplicate record ids.
The first record in the list is the oldest record and the last one is the newest record.
Creates the database file if it doesn't exists.</p></div></div><div class="spec val" id="val-read_visible_records"><a href="#val-read_visible_records" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>read_visible_records : (<span class="keyword">module </span><a href="Database/module-type-T/index.html">Database.T</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="Database/module-type-T/index.html#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> (<a href="Record_id/index.html#type-t">Record_id.t</a><span class="keyword"> * </span><span class="type-var">'a</span>, exn) Pervasives.result list Lwt.t</code></div><div class="doc"><p><code class="code">Sanddb.read_visible_records database unit</code> gives back every visible(not shadowed) database record, which also means there is no duplicate record id in the result.
The first record in the list is the newest record and the last one is the oldest record.
Creates the database file if it doesn't exists.</p></div></div><div class="spec val" id="val-insert_record"><a href="#val-insert_record" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>insert_record : (<span class="keyword">module </span><a href="Database/module-type-T/index.html">Database.T</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="Database/module-type-T/index.html#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <a href="Record_id/index.html#type-t">Record_id.t</a> Lwt.t</code></div><div class="doc"><p><code class="code">Sanddb.insert_record database data</code> inserts record into the database. The record id is generated automatically and given back as a result.
Creates the database file if it doesn't exists.</p></div></div><div class="spec val" id="val-insert_shadowing_record"><a href="#val-insert_shadowing_record" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>insert_shadowing_record : (<span class="keyword">module </span><a href="Database/module-type-T/index.html">Database.T</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="Database/module-type-T/index.html#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> <a href="Record_id/index.html#type-t">Record_id.t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <a href="Record_id/index.html#type-t">Record_id.t</a> Lwt.t</code></div><div class="doc"><p><code class="code">Sanddb.insert_record database data</code> inserts record into the database with the given record id.
It can shadow an older record if it has the same record id as the new one.
Creates the database file if it doesn't exists.</p></div></div></body></html>